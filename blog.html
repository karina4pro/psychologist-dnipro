<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–ª–æ–≥ - –ö–∞—Ä–∏–Ω–∞ –í–∞—Ä–≥–∞–Ω–æ–≤–∞ | –ü—Å–∏—Ö–æ–ª–æ–≥ –î–Ω–µ–ø—Ä</title>
    <meta name="description" content="–°—Ç–∞—Ç—å–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –ö–∞—Ä–∏–Ω—ã –í–∞—Ä–≥–∞–Ω–æ–≤–æ–π –æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö, —Å–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–º —Ä–æ—Å—Ç–µ">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="–ö–∞—Ä–∏–Ω–∞ –í–∞—Ä–≥–∞–Ω–æ–≤–∞ - –ü—Å–∏—Ö–æ–ª–æ–≥">
    <meta property="og:url" content="https://www.karina-psychologist.com/blog.html">
    <link rel="canonical" href="https://www.karina-psychologist.com/blog.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="./dist/output.css" as="style">
    <link href="./dist/output.css" rel="stylesheet">
</head>
<body class="bg-neutral-light text-neutral-dark">
<div id="header-placeholder"></div>


    <main class="pt-24 pb-16">
        <div class="container">
            <h1 class="heading-xl text-center mb-12 text-primary-dark">üìù –ë–ª–æ–≥ –ø—Å–∏—Ö–æ–ª–æ–≥–∞</h1>
            
            <div id="blog-posts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- –°—Ç–∞—Ç—å–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            
            <div id="loading" class="text-center py-8">
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–µ–π...</p>
            </div>
        </div>
    </main>
<div id="footer-placeholder"></div>
<script>
    const sanityConfig = {
        projectId: 'i2ncx2dk',
        dataset: 'production',
        apiVersion: '2024-05-15'
    };

    async function loadPosts() {
        try {
            console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã...');
            
            const query = `*[_type == "post"] | order(publishedAt desc) {
                title,
                "slug": slug.current,
                publishedAt,
                body,
                mainImage
            }`;
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º CDN –≤–µ—Ä—Å–∏—é API –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è CORS
            const url = `https://${sanityConfig.projectId}.api.sanity.io/v1/data/query/${sanityConfig.dataset}?query=${encodeURIComponent(query)}`;
            
            console.log('URL –∑–∞–ø—Ä–æ—Å–∞:', url);
            
            const response = await fetch(url);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            console.log('–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ:', data);
            
            renderPosts(data.result || []);
            
        } catch (error) {
            console.error('–ü–æ–ª–Ω–∞—è –æ—à–∏–±–∫–∞:', error);
            document.getElementById('loading').innerHTML = `
                <div class="text-center py-8">
                    <p class="text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${error.message}</p>
                    <p class="text-sm text-neutral mt-2">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π</p>
                </div>
            `;
        }
    }

    function renderPosts(posts) {
        const container = document.getElementById('blog-posts');
        document.getElementById('loading').style.display = 'none';
        
        console.log('–†–µ–Ω–¥–µ—Ä–∏–º –ø–æ—Å—Ç—ã:', posts);
        
        if (!posts || posts.length === 0) {
            container.innerHTML = `
                <div class="col-span-full text-center py-12">
                    <p class="text-lg text-neutral">–°—Ç–∞—Ç—å–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    <p class="text-sm text-neutral mt-2">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—Ç–∞—Ç—å–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ Sanity Studio</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = posts.map(post => `
            <article class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                <div class="p-6">
                    <h2 class="text-xl font-bold mb-3 text-primary-dark">
                        ${post.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}
                    </h2>
                    ${post.publishedAt ? `
                        <time class="text-sm text-neutral">
                            ${new Date(post.publishedAt).toLocaleDateString('ru-RU')}
                        </time>
                    ` : ''}
                    ${post.slug ? `
                        <div class="mt-4">
                            <a href="post.html?slug=${post.slug}" class="text-primary hover:text-primary-dark">
                                –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ ‚Üí
                            </a>
                        </div>
                    ` : ''}
                </div>
            </article>
        `).join('');
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', loadPosts);
    </script>
    <script src="components/header.js"></script>
<script>
    document.getElementById('header-placeholder').innerHTML = getHeaderHTML('blog');
</script>
<script src="components/footer.js"></script>
<script>
    document.getElementById('footer-placeholder').innerHTML = getFooterHTML();
</script>
    <script src="src/main.js" defer></script>
</body>
</html>